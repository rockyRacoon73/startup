# The internet
# Web Servers
a computing device that is hosting a web service that knows how to accept incoming internet connections and speak the HTTP application protocol
# web service gateways
* multiple web services on single device
* each service starts on a different port in device
* gateway looks at request and maps it to port number

# Amazon WEb Services - EC2

**opening startup server in browser**
`http://18.232.89.80`

## ssh into server
`➜  ssh -i [key pair file] ubuntu@[ip address]`

restrict permissions
 `chmod  600 [key pair file]`

# Domain Names
get IP address for any domain - `dig`
domane names may have multiple IP addresses (such as amazon.com)  in cas server listening at IP adress is not responding

domain names 
* a root and 1+ subdomains
 * `[subdomain.]*secondary.top`
 * root domain is represented by secondary level and top level domains
 * TLD representes things like com, edu, or clock
* ex: root domains byu.edu, google.com, cs260.click
* ICAAN controls list of TLDs
* root domain owner can create any number of subdomains

`whois` console utility gets info about domain name from domane name registery

DNS database records for mapping domain names to IP adresses
* `address (A)`
*   straight mapping from a domain  name to IP address
* `canonical name (CNAME)`
*   maps one domain name to another domain name
*   acts like an alias so you can map things like byu.com to byu.edu IP

there are a lot of levels to caching
( browser checks its cache of names for domain, if not contacts DNS and gets IP, if not in DNS, DNS contacts `authoritative name server` as last resort - unkown domain name error
caching can be frustrating when updating domain name
so you can set `time to live` (`TIL`) min to days and caching layers should honor TIL and clear cache

# Amazon Web Services - Route 53
* in order to make server easy to remember and secure, buy a domain name, and then create DNS records

* Route 53 handles everything DNS related
* NS (name server) records - contains the names of authoratitatve servers that authorize you to place DNS records in this DNS server
* SOA (start of authority) provides contact info about the owner of this domain name

## Manage your DNS records
* A (address) type record - represents the wildcard subdomain name and your server's public ip address


# Caddy
A web service that listens for incoming HYYP requests
* serves up requested files or routes request to another web service
* ability to route requests is called `reverse proxy` or `gateway`
* multiple services as a single external web service


* caddy handles all creation and rotation of web certificates. Allows easy support HTTPS
* serves up all static HTML CSS and JavaScript files
* Acts as a gateway for subdomain requests to your simon and startup application services

# Important caddy files

* **Configuration file:** `/Caddyfile`
  contains the definitions for routhing HTTP requests that caddy recieves

* **HTML files:** `~/public_html`
  directory of files that caddy serves up when requests are made to the root of your web server
  <img width="709" alt="image" src="https://github.com/rockyRacoon73/startup/assets/90075184/d6de44d2-72f6-427b-92e5-023428c2c8e3">

# HTTPS, TLS, and web certificates
# HTTPS and TLS
the secure version of HTTP `HTTPS` (Secure Hypertext Transport Protocol)
* bassicaly HTTP with a negotiated secure connection before any data is exchanged
* Secure connection = all data encrypted by TLS protocol
`➜  curl -v -s https://byu.edu > /dev/null`
^ -v allows us to see the verbose output of HTTPS exahnge
/dev/null throws away actual HTTP response


negotiation is fairly complex with multiple steps in the handshake
* core piece of handshake is the exchange of a web certificate that identifies the domain name of the server creating the secure connection
* browser will compare certificate domain name to one represented in the URL and if they don't match, or certificate is invalid, it will display massive warning

# web certificates
* generated by trusted 3rd party using public/private key encription


# Enabling HTTPS
basically standard now

you can obtain, renew a web ccertificate by enabling ACME protocol for your web server and communicateing with Let's Encrypt to generate the needed certificates

# Caddy
acts as gateway to our different services and to host our static web application files
* has ACME built in so just need to configuer Caddy with domain name

Use the ssh console program to shell into your production environment server.

`➜  ssh -i [key pair file] ubuntu@[yourdomainnamehere]`
